extends index.pug

block aside
  aside.sidebar
    h2 Role Actions
    .actions.secondary
      form(action="/roles/" + role.id + "/actions/adduser/" method="post")
        label.label Add/Invite User Email:
        .data.layout-col
          input(id="inviteduser" type="text" name="inviteduser")
        label.label PIN:
        .data.layout-col
          input(id="pin" type="text" name="pin" value= pin)
          .subdata The person you invite to this role must provide this PIN. Please communicate this PIN to them so they can accept the invitation.
        label.label Comment (optional):
        .data.layout-col
          input(id="comment" type="text" name="comment")
          .subdata Notes on the invite (optional)
        label.label Actions:
        .data.layout-row
          input.btn.primary.buttonconfirm(type="submit" id="submit" value="Confirm")
          //- #role_add_user_button_container.authUI(data-fetch="role_add_user" data-href="/roles/" + role.id + "/actions/adduser/")
          //- a.btn.submit(href="/roles/" + role.id + "/adduser/") Add User
          //- .data.layout-row
          a.btn.cancel(href="/roles/") Cancel
      //- #note_add_button_container.addnote.authUI(data-fetch="note_add" data-href="/actions/create/notes/")

block content
  section
    h2 Add/Invite User to Role
    div
      .itempanel
        .itembanner
          .itemhead Role: #{role.name}
          .itemdetail
            label.label(for="roledescription") Description:
            #roledescription.data #{role.description}
          .itemdetail
            label.label For Domain:
            each domain in role.domains
              #roledomain.data #{domain.name}
          if(role.capabilities)
            .itemdetail
              label.label Capabilities:
              //- strange: in PUG keys and vals are swapped (below)
              each scope,capability in role.capabilities
                .data #{capability} : #{scope}
          //- #role_edit_button_container.authUI(data-fetch="role_edit" data-href="/roles/" + role.id + "/actions/edit/")
        .item-listing
          .itemdetail
            label.label Users Currently In This Role
            each user in role.users
              .data #{user.fullname}
