"use strict";var Laminar=Laminar||{};Laminar.Widget=function(){var defaultElementClass="lm",defaultElementType="div",_findElement=function(selector){return selector=selector||"body",document.querySelector(selector)},_gobble=function(domObj){for(var attributeList=domObj.attributes,widgetConfigObj={},count=0;count<attributeList.length;count++)widgetConfigObj[attributeList[count].name]=attributeList[count].value;widgetConfigObj.element=domObj.tagName;var myId=domObj.getAttribute("id");null===myId&&void 0===myId||(widgetConfigObj.id=myId);var parentID=domObj.parentNode.getAttribute("id");return widgetConfigObj.parent=parentID?"#"+parentID:"body",widgetConfigObj.hasOwnProperty("class")&&(widgetConfigObj.classlist=widgetConfigObj.class.split(" ")),widgetConfigObj};function Widget(configObj){if(configObj=configObj||{},this.events={},this.subscriptions=[],this.states=[],this.mutations=new MutationObserver(function(mutation){for(var m in mutation)mutation.hasOwnProperty(m)}),configObj){var p,gobbledElement=!1;configObj.nodeType?(gobbledElement=!0,this.domElement=configObj,this.addClass(defaultElementClass),configObj=_gobble(this.domElement)):"string"==typeof configObj?(this.domElement=_findElement(configObj),this.addClass(defaultElementClass)):(this.element=configObj.element||defaultElementType,this.domElement=document.createElement(this.element)),p=configObj.parent||"body",configObj.hasOwnProperty("id")&&this.set("id",configObj.id),configObj.hasOwnProperty("type")&&this.set("type",configObj.type),this.addClass(defaultElementClass),configObj.hasOwnProperty("classlist")&&this.addClasses(configObj.classlist),configObj.hasOwnProperty("content")&&this.content(configObj.content),configObj.hasOwnProperty("value")&&this.set("value",configObj.value),configObj.hasOwnProperty("proplist")&&this.setProps(configObj.proplist),configObj.hasOwnProperty("datalist")&&this.setData(configObj.datalist),configObj.hasOwnProperty("statelist")&&(this.states=configObj.statelist,this.setState()),configObj.hasOwnProperty("responsive")&&"function"==typeof configObj.responsive&&(this.responsive=configObj.responsive,window.addEventListener("resize",function(){this.responsive(this)}.bind(this))),gobbledElement||this.setParent(p)}this.mutations.observe(this.domElement,{attributes:!0})}return Widget.prototype.set=function(attrib,val){return"value"==attrib&&"input"==this.element.toLowerCase()?this.setValue(val):(this.domElement.setAttribute(attrib,val),this)},Widget.prototype.unset=function(attrib){return"value"==attrib&&"input"==this.element.toLowerCase()?this.setValue(""):(this.domElement.removeAttribute(attrib),this)},Widget.prototype.setParent=function(elementSelector){return null===elementSelector||"undefined"===elementSelector?this:(elementSelector instanceof Widget?this.parent="#"+elementSelector.getId():elementSelector.nodeType?this.parent="#"+elementSelector.getAttribute("id"):"string"==typeof elementSelector&&(this.parent=elementSelector),this.remove(),this.update(),this)},Widget.prototype.setValue=function(val){return this.domElement.value=val,this},Widget.prototype.setElement=function(type){for(var attribute in this.domElement.attributes)console.log("Attribute",attribute,"value",this.domElement.attributes[attribute])},Widget.prototype.get=function(attrib){return"value"==attrib&&"input"==this.element.toLowerCase()?this.domElement.value:this.domElement.getAttribute(attrib)},Widget.prototype.getData=function(attrib){return this.domElement.dataset[attrib]},Widget.prototype.setData=function(dataList){for(var key in dataList)dataList.hasOwnProperty(key)&&(this.domElement.dataset[key]=dataList[key])},Widget.prototype.value=function(){return this.get("value")},Widget.prototype.findChildren=function(selector){return null==selector?this.domElement.children:this.domElement.querySelectorAll(selector)},Widget.prototype.remove=function(){return"undefined"!=this.domElement.parentNode&&null!==this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement)},Widget.prototype.removeChild=function(childSelector){return this.domElement.removeChild(this.find(childSelector)),this},Widget.prototype.setProps=function(props){if(null==props||props.length<1)return!1;props.forEach(function(e,i,a){null===e[0]||void 0===e[0]||""==e[0]||this.set(e[0],e[1])}.bind(this))},Widget.prototype.getProp=function(prop){return this.domElement[prop]||!1},Widget.prototype.getAttributes=function(){for(var attrs=this.getProp("attributes"),attrList={},count=0;count<attrs.length;count++)attrList[attrs[count].name]=attrs[count].value;return attrList},Widget.prototype.getId=function(){return this.getProp("id")},Widget.prototype.getTagName=function(){return this.getProp("tagName")},Widget.prototype.getClassList=function(){return this.getProp("classList")},Widget.prototype.getOffset=function(){var element=this.domElement,top=0,left=0;top+=element.offsetTop||0,left+=element.offsetLeft||0;do{element=element.offsetParent}while(element);return{top:top,left:left}},Widget.prototype.getLeft=function(){return this.getOffset().left},Widget.prototype.getTop=function(){return this.getOffset().top},Widget.prototype.getScrollTop=function(){return this.domElement.scrollTop},Widget.prototype.getBoundingTop=function(){return this.domElement.getBoundingClientRect().top},Widget.prototype.getBoundingBottom=function(){return this.domElement.getBoundingClientRect().bottom},Widget.prototype.getBoundingLeft=function(){return this.domElement.getBoundingClientRect().left},Widget.prototype.getPosition=function(){return{left:this.getLeft(),top:this.getTop()}},Widget.prototype.getDimensions=function(){return{height:this.getHeight(),width:this.getWidth()}},Widget.prototype.getHeight=function(){return this.domElement.offsetHeight},Widget.prototype.getWidth=function(){return this.domElement.offsetWidth},Widget.prototype.removeClass=function(classname){return this.domElement.classList.remove(classname),this},Widget.prototype.addClass=function(classname){return this.domElement.classList?this.domElement.classList.add(classname):this.domElement.classname+=" "+classname,this},Widget.prototype.addClasses=function(classlist){for(var c in classlist)this.addClass(classlist[c]);return this},Widget.prototype.setState=function(state){null==state&&(state=this.states.length>0?this.states[0]:null);var statePosition=this.states.indexOf(state);if(this.states.length>0&&statePosition>-1){this.addClass(state);for(var i=0;i<this.states.length;i++)i!=statePosition&&this.removeClass(this.states[i])}return this.dispatchEvent("statechange"),this},Widget.prototype.setNextState=function(){var statePosition=this.states.indexOf(this.getState());return++statePosition>=this.states.length&&(statePosition=0),this.setState(this.states[statePosition]),this},Widget.prototype.setPrevState=function(){var statePosition=this.states.indexOf(this.getState());return--statePosition<0&&(statePosition=this.states.length-1),this.setState(this.states[statePosition]),this},Widget.prototype.getState=function(){for(var i=0;i<this.states.length;i++)if(this.hasClass(this.states[i]))return this.states[i];return!1},Widget.prototype.hasClass=function(classname){return!!this.domElement.classList&&this.domElement.classList.contains(classname)},Widget.prototype.toggleClass=function(classname){return this.domElement.classList.toggle(classname),this},Widget.prototype.css=function(prop,val){return this.domElement.style[prop]=val,this},Widget.prototype.hide=function(){return this.css("display","none"),this},Widget.prototype.show=function(){return this.css("display",""),this},Widget.prototype.after=function(content){return this.domElement.insertAdjacentHTML("afterend",content),this},Widget.prototype.prepend=function(content){return this.domElement.insertAdjacentHTML("afterbegin",content),this},Widget.prototype.append=function(content){return this.domElement.insertAdjacentHTML("beforeend",content),this},Widget.prototype.before=function(content){return this.domElement.insertAdjacentHTML("beforebegin",content),this},Widget.prototype.children=function(){return this.domElement.children},Widget.prototype.empty=function(content){return this.hasOwnProperty("element")?("input"==this.element.toLowerCase()?this.domElement.value="":this.domElement.innerHTML="",content&&this.content(content),this):this},Widget.prototype.content=function(content){if(Array.isArray(content))for(var i=0;i<content.length;i++)this.content(content[i]);else content instanceof Laminar.Widget?(content.parent=this.domElement.id,this.domElement.appendChild(content.domElement)):this.domElement.insertAdjacentHTML("beforeend",content);return this},Widget.prototype.html=function(content){return null==content?this.domElement.innerHTML:(this.domElement.innerHTML=content,this)},Widget.prototype.update=function(func){if(null!==this.parent){var foundObject=_findElement(this.parent);foundObject&&(foundObject.appendChild(this.domElement),"function"==typeof func&&func(this))}return this},Widget.prototype.dispatchEvent=function(eventName){var event=new Event(eventName,{bubbles:!0});this.domElement.dispatchEvent(event)},Widget.prototype.listenEvent=function(eventName,func,configObj){return"function"!=typeof func?this:(this.domElement.addEventListener(eventName,function(e){"function"==typeof func&&(func(e,this),configObj&&configObj.hasOwnProperty("doOnce")&&!0===configObj.doOnce&&(func=null))}.bind(this)),this)},Widget.prototype.watch=function(obj,propertyName,func){var valPropertyName="__val_"+propertyName,setterFunctions="__fnc_"+propertyName,thisWidget=this;Object.defineProperty(obj,valPropertyName,{configurable:!0,writable:!0}),Object.defineProperty(obj,propertyName,{configurable:!0,set:function(val){this[valPropertyName]=val;for(var c=0;c<this[setterFunctions].length;c++)this[setterFunctions][c].call(thisWidget,val)},get:function(){return this[valPropertyName]}}),obj.hasOwnProperty(setterFunctions)||(obj[setterFunctions]=[]),obj[setterFunctions].push(func)},Widget.prototype.subscribe=function(obj,evnt,func){var setSubscribe=function(obj,evnt,func){var token=obj.subscribe(evnt,func);if(token)return{event:evnt,token:token,obj:obj}};if(Array.isArray(evnt))for(var i in evnt)this.subscriptions.push(setSubscribe(obj,evnt[i],func.bind(this)));else this.subscriptions.push(setSubscribe(obj,evnt,func.bind(this)))},Widget.prototype.getSubscription=function(obj,evnt){for(var count in this.subscriptions)if(this.subscriptions[count].event==evnt&&this.subscriptions[count].obj==obj)return this.subscriptions[count].token;return!1},Widget.prototype.unsubscribe=function(obj,evnt){var token=this.getSubscription(obj,evnt);if(token)return obj.unsubscribe(token)},Widget}();