let getAuthElements=function(){return document.getElementsByClassName("authUI")},authUI=function(list){for(let c=0;c<list.length;c++)console.log(list[c].dataset.fetch),requestElement(list[c])},requestElement=function(parentElement){let requestObj={method:"POST",credentials:"include"};return parentElement.dataset.hasOwnProperty("params")&&(requestObj.body=JSON.stringify({params:parentElement.dataset.params})),fetch(`/authorizedelements/${parentElement.dataset.fetch}/`,requestObj).then(function(response){return response.json()}).then(function(elementJson){if(elementJson.hasOwnProperty("error"))console.log(elementJson.error);else{elementJson.element.parent=parentElement,console.log("Retrieved element:\n"+JSON.stringify(elementJson.element));let user_button=new Laminar.Widget(elementJson.element);var attributes=Object.keys(parentElement.dataset);for(c in attributes)"fetch"!=attributes[c]&&(console.log("Setting attribute on child: "+attributes[c]),user_button.set(attributes[c],parentElement.dataset[attributes[c]]))}}).catch(function(err){console.log("Caught requested element error: "+err.message)})};function ready(fn){"loading"!==document.readyState?fn():document.addEventListener("DOMContentLoaded",fn)}ready(function(){let listOfElements=getAuthElements();authUI(listOfElements)});